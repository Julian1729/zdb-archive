function fillData(){var e={};for(var t in visitObj)if(visitObj.hasOwnProperty(t)&&""!==visitObj[t]){var r=columnMap[t];e[r]=visitObj[t]}for(var r in e)if(e.hasOwnProperty(r)){var o=document.querySelector('[name="'+r+'"]');o&&(o.value=e[r])}}function createActivity(e){function t(){m&&m.classList.add("hide"),d.classList.remove("hide")}function o(){d.classList.add("hide"),m.classList.remove("hide")}function i(){d.classList.add("hide"),m&&m.classList.add("hide")}var s=e.split("-"),a=s[2],c="",n=!1;"sis"===a?(c=document.getElementById("sister-activty").innerHTML,n=!0,sisActCount++):(c=document.getElementById("brother-activity").innerHTML,broActCount++);var l=document.createElement("DIV");l.innerHTML=c;var u=l.firstElementChild;u.setAttribute("data-group",e);var d=u.querySelector(".publisher-form"),m=u.querySelector(".sheperding-form"),f=u.querySelectorAll(".radiobutton-container"),b=e+"_"+(n?sisActCount:broActCount),v="r"+(n?sisActCount:broActCount);for(r=0;r<f.length;r++){var h=f[r],_=h.querySelector("input[type=radio]");_.setAttribute("name",b),_.setAttribute("id",v);h.querySelector("label").setAttribute("for",v)}if(!n){u.querySelector('input[value="1"]').onclick=function(){this.checked&&o()}}return u.querySelector('input[value="2"]').onclick=function(){this.checked&&t()},u.querySelector('input[value="3"]').onclick=function(){this.checked&&t()},u.querySelector("span.delete-row").onclick=function(){u.remove()},u}function formCallback(e,t){console.log(t);var r=JSON.parse(t);switch(r.code){case 1:Dropper("Changes Saved","positive");break;case 0:Dropper("Please correct the errors in the previous form","negative"),formvalErrorHandler(e,r.errors);break;case 3:Dropper("No changes saved","neutral"),r.errors&&(Dropper("Please correct the errors in the previous form","negative"),formvalErrorHandler(e,r.errors));break}}function submissionCallback(e,t){var r=JSON.parse(t);switch(r.code){case 1:showModal("submit-success-modal");break;case 0:Dropper("Please correct the errors in the form below","negative"),formvalErrorHandler(e,r.errors);break;case 3:Dropper("No changes saved","neutral"),r.errors&&(Dropper("Please correct the errors in the last form","negative"),formvalErrorHandler(e,r.errors));break}}function submitButtonCallback(e){function t(e){e.classList.add("left"),setTimeout(function(){e.classList.add("hide")},500)}function r(e){e.classList.add("right"),setTimeout(function(){e.classList.add("hide")},500)}function o(e){e.classList.remove("hide"),setTimeout(function(){e.classList.remove("left"),e.classList.remove("right")},500)}var i=parseInt(this.getAttribute("for")),s="form"+(i+1).toString(),a="form"+(i-1).toString(),c=!!(el=document.getElementById(s))&&el,n=!!(el=document.getElementById(a))&&el;switch(this.getAttribute("data-action")){case"next":c&&(t(e),o(c),scrollTop());break;case"submit":console.log("submit");break;default:console.log("default")}}function serviceFormCallback(e){submitButtonCallback.call(this,e);var t=getActivities();wed_acts_bro=JSON.stringify(t.bro.wed),thurs_acts_bro=JSON.stringify(t.bro.thurs),fri_acts_bro=JSON.stringify(t.bro.fri),wed_acts_sis=JSON.stringify(t.sis.wed),thurs_acts_sis=JSON.stringify(t.sis.thurs),fri_acts_sis=JSON.stringify(t.sis.fri),serviceForm.extras({action:"visitForm",form:"serviceform",wed_bro:wed_acts_bro,thurs_bro:thurs_acts_bro,fri_bro:fri_acts_bro,wed_sis:wed_acts_sis,thurs_sis:thurs_acts_sis,fri_sis:fri_acts_sis})}function getActivities(){function e(e){if(!e)return{};for(var t={},r=0;r<e.length;r++){var o=e[r],i=o.getAttribute("data-group"),s=o.querySelector('.radiogroup input[name^="'+i+'"]:checked'),a=o.querySelectorAll(".radiobutton-container");if(s){for(var c=0;c<a.length;c++)a[c].classList.remove("fail");switch(s.value){case"1":var n=o.querySelector('input[name^="'+i+'_shep_elder"]').value,l=o.querySelector('input[name^="'+i+'_shep_pub"]').value,u=o.querySelector('textarea[name^="'+i+'_shep_sit"]').value;t.shep={elder:n,pub:l,sit:u};break;case"2":var l=o.querySelector('input[name^="'+i+'_pub"]').value;t.bs={pub:l};break;case"3":var l=o.querySelector('input[name^="'+i+'_pub"]').value;t.rv={pub:l};break}}else for(var c=0;c<a.length;c++)a[c].classList.add("fail")}return t}return{bro:{wed:e(document.querySelectorAll('[data-group="wed_bro_act"]')),thurs:e(document.querySelectorAll('[data-group="thurs_bro_act"]')),fri:e(document.querySelectorAll('[data-group="fri_bro_act"]'))},sis:{wed:e(document.querySelectorAll('[data-group="wed_sis_act"]')),thurs:e(document.querySelectorAll('[data-group="thurs_sis_act"]')),fri:e(document.querySelectorAll('[data-group="fri_sis_act"]'))}}}fillData();for(var broActCount=0,sisActCount=0,id=0,addActivityButtons=document.querySelectorAll(".add-activity-button"),a=0;a<addActivityButtons.length;a++)addActivityButtons[a].onclick=function(){var e=this.getAttribute("data-prefix");e||console.error("No day specified for");var t=createActivity(e);this.parentNode.insertBefore(t,this)};for(var backButtons=document.querySelectorAll("button[data-action=back]"),i=0;i<backButtons.length;i++){var button=backButtons[i];button.onclick=function(){function e(e){e.classList.add("left"),setTimeout(function(){e.classList.add("hide")},500)}function t(e){e.classList.add("right"),setTimeout(function(){e.classList.add("hide")},500)}function r(e){e.classList.remove("hide"),setTimeout(function(){e.classList.remove("left"),e.classList.remove("right")},500)}var o=parseInt(this.getAttribute("for")),i="form"+(o+1).toString(),s="form"+(o-1).toString(),a=!!(el=document.getElementById(i))&&el,c=!!(el=document.getElementById(s))&&el,n=document.getElementById("form"+o);c&&(r(c),t(n))}}document.getElementById("modal-done-button").onclick=function(){window.location.href=URI.HOME_URI};var wed_acts_bro,thurs_acts_bro,fri_acts_bro,wed_acts_sis,thurs_acts_sis,fri_acts_sis,serviceForm=F("form1",formCallback,{url:URI.AJAX_URI,method:"POST"});serviceForm.submitButtonClick(serviceFormCallback);var mealSchedule=F("form2",formCallback,{url:URI.AJAX_URI,method:"POST"});mealSchedule.extras({action:"visitForm",form:"mealform"}),mealSchedule.submitButtonClick(submitButtonCallback);var elderForm=F("form3",submissionCallback,{url:URI.AJAX_URI,method:"POST"});elderForm.extras({action:"visitForm",form:"elderform"}),elderForm.submitButtonClick(submitButtonCallback);