!function e(t,n){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):(t.Mustache={},n(t.Mustache))}(this,function e(t){function n(e){return"function"==typeof e}function r(e){return v(e)?"array":typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function s(e,t){return w.call(e,t)}function a(e){return!s(y,e)}function u(e){return String(e).replace(/[&<>"'`=\/]/g,function e(t){return x[t]})}function c(e,n){function r(){if(f&&!d)for(;c.length;)delete u[c.pop()];else c=[];f=!1,d=!1}function o(e){if("string"==typeof e&&(e=e.split(b,2)),!v(e)||2!==e.length)throw new Error("Invalid tags: "+e);g=new RegExp(i(e[0])+"\\s*"),w=new RegExp("\\s*"+i(e[1])),y=new RegExp("\\s*"+i("}"+e[1]))}if(!e)return[];var s=[],u=[],c=[],f=!1,d=!1,g,w,y;o(n||t.tags);for(var x=new h(e),T,j,S,V,C,A;!x.eos();){if(T=x.pos,S=x.scanUntil(g))for(var I=0,R=S.length;I<R;++I)V=S.charAt(I),a(V)?c.push(u.length):d=!0,u.push(["text",V,T,T+1]),T+=1,"\n"===V&&r();if(!x.scan(g))break;if(f=!0,j=x.scan(U)||"name",x.scan(k),"="===j?(S=x.scanUntil(m),x.scan(m),x.scanUntil(w)):"{"===j?(S=x.scanUntil(y),x.scan(E),x.scanUntil(w),j="&"):S=x.scanUntil(w),!x.scan(w))throw new Error("Unclosed tag at "+x.pos);if(C=[j,S,T,x.pos],u.push(C),"#"===j||"^"===j)s.push(C);else if("/"===j){if(!(A=s.pop()))throw new Error('Unopened section "'+S+'" at '+T);if(A[1]!==S)throw new Error('Unclosed section "'+A[1]+'" at '+T)}else"name"===j||"{"===j||"&"===j?d=!0:"="===j&&o(S)}if(A=s.pop())throw new Error('Unclosed section "'+A[1]+'" at '+x.pos);return l(p(u))}function p(e){for(var t=[],n,r,i=0,o=e.length;i<o;++i)(n=e[i])&&("text"===n[0]&&r&&"text"===r[0]?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function l(e){for(var t=[],n=t,r=[],i,o,s=0,a=e.length;s<a;++s)switch(i=e[s],i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":o=r.pop(),o[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}return t}function h(e){this.string=e,this.tail=e,this.pos=0}function f(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function d(){this.cache={}}var g=Object.prototype.toString,v=Array.isArray||function e(t){return"[object Array]"===g.call(t)},w=RegExp.prototype.test,y=/\S/,x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},k=/\s*/,b=/\s+/,m=/\s*=/,E=/\s*\}/,U=/#|\^|\/|>|\{|&|=|!/;h.prototype.eos=function e(){return""===this.tail},h.prototype.scan=function e(t){var n=this.tail.match(t);if(!n||0!==n.index)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},h.prototype.scanUntil=function e(t){var n=this.tail.search(t),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r},f.prototype.push=function e(t){return new f(t,this)},f.prototype.lookup=function e(t){var r=this.cache,i;if(r.hasOwnProperty(t))i=r[t];else{for(var s=this,a,u,c=!1;s;){if(t.indexOf(".")>0)for(i=s.view,a=t.split("."),u=0;null!=i&&u<a.length;)u===a.length-1&&(c=o(i,a[u])),i=i[a[u++]];else i=s.view[t],c=o(s.view,t);if(c)break;s=s.parent}r[t]=i}return n(i)&&(i=i.call(this.view)),i},d.prototype.clearCache=function e(){this.cache={}},d.prototype.parse=function e(n,r){var i=this.cache,o=i[n];return null==o&&(o=i[n+":"+(r||t.tags).join(":")]=c(n,r)),o},d.prototype.render=function e(t,n,r){var i=this.parse(t),o=n instanceof f?n:new f(n);return this.renderTokens(i,o,r,t)},d.prototype.renderTokens=function e(t,n,r,i){for(var o="",s,a,u,c=0,p=t.length;c<p;++c)u=void 0,s=t[c],a=s[0],"#"===a?u=this.renderSection(s,n,r,i):"^"===a?u=this.renderInverted(s,n,r,i):">"===a?u=this.renderPartial(s,n,r,i):"&"===a?u=this.unescapedValue(s,n):"name"===a?u=this.escapedValue(s,n):"text"===a&&(u=this.rawValue(s)),void 0!==u&&(o+=u);return o},d.prototype.renderSection=function e(t,r,i,o){function s(e){return a.render(e,r,i)}var a=this,u="",c=r.lookup(t[1]);if(c){if(v(c))for(var p=0,l=c.length;p<l;++p)u+=this.renderTokens(t[4],r.push(c[p]),i,o);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)u+=this.renderTokens(t[4],r.push(c),i,o);else if(n(c)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");c=c.call(r.view,o.slice(t[3],t[5]),s),null!=c&&(u+=c)}else u+=this.renderTokens(t[4],r,i,o);return u}},d.prototype.renderInverted=function e(t,n,r,i){var o=n.lookup(t[1]);if(!o||v(o)&&0===o.length)return this.renderTokens(t[4],n,r,i)},d.prototype.renderPartial=function e(t,r,i){if(i){var o=n(i)?i(t[1]):i[t[1]];return null!=o?this.renderTokens(this.parse(o),r,i,o):void 0}},d.prototype.unescapedValue=function e(t,n){var r=n.lookup(t[1]);if(null!=r)return r},d.prototype.escapedValue=function e(n,r){var i=r.lookup(n[1]);if(null!=i)return t.escape(i)},d.prototype.rawValue=function e(t){return t[1]},t.name="mustache.js",t.version="2.3.0",t.tags=["{{","}}"];var T=new d;return t.clearCache=function e(){return T.clearCache()},t.parse=function e(t,n){return T.parse(t,n)},t.render=function e(t,n,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+r(t)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(t,n,i)},t.to_html=function e(r,i,o,s){var a=t.render(r,i,o);if(!n(s))return a;s(a)},t.escape=u,t.Scanner=h,t.Context=f,t.Writer=d,t});